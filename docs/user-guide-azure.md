# 1on1 発話比率測定アプリ - ユーザーガイド（Azure Speech Service版）

## はじめに

このガイドでは、Azure Speech Serviceを使用した1on1発話比率測定アプリの使用方法を説明します。

## 目次

1. [事前準備](#事前準備)
2. [Azure設定](#azure設定)
3. [上司の声登録](#上司の声登録)
4. [1on1測定](#1on1測定)
5. [結果の確認](#結果の確認)
6. [トラブルシューティング](#トラブルシューティング)

## 事前準備

### 必要なもの

1. **Azureアカウント**
   - 無料アカウントでも利用可能
   - [Azure無料アカウントの作成](https://azure.microsoft.com/ja-jp/free/)

2. **Azure Speech Service**
   - Azureポータルで作成
   - サブスクリプションキーとリージョンが必要

3. **対応ブラウザ**
   - Google Chrome 90以上（推奨）
   - Microsoft Edge 90以上
   - Mozilla Firefox 88以上

4. **マイク**
   - PCまたはヘッドセットのマイク
   - マイクへのアクセス許可が必要

### Azure Speech Serviceの作成

1. **Azureポータルにアクセス**
   - https://portal.azure.com にログイン

2. **Speech Serviceを作成**
   ```
   1. 画面左上の「リソースの作成」をクリック
   2. 検索ボックスに「Speech」と入力
   3. 「Speech」を選択して「作成」をクリック
   ```

3. **必要な情報を入力**
   - **サブスクリプション**: 使用するサブスクリプションを選択
   - **リソースグループ**: 新規作成または既存を選択
   - **リージョン**: `Japan East`（推奨）
   - **名前**: 任意の名前（例: speech-service-1on1）
   - **価格レベル**: `Free F0`（無料枠）または`Standard S0`

4. **確認と作成**
   - 入力内容を確認して「作成」をクリック
   - デプロイ完了まで待機（通常1-2分）

5. **キーとリージョンを取得**
   ```
   1. デプロイ完了後「リソースに移動」をクリック
   2. 左メニューから「キーとエンドポイント」を選択
   3. 「キー 1」をコピー（これがサブスクリプションキー）
   4. 「場所/リージョン」を確認（例: japaneast）
   ```

## Azure設定

アプリケーションでAzure Speech Serviceを使用するための設定を行います。

### 手順

1. **アプリケーションを開く**
   - ブラウザで`index.html`を開く
   - デフォルトで「Azure設定」タブが表示されます

2. **サブスクリプションキーを入力**
   - Azureポータルからコピーしたキーを貼り付け
   - 例: `1234567890abcdef1234567890abcdef`

3. **リージョンを入力**
   - Azureポータルで確認したリージョンを入力
   - 例: `japaneast`
   - よく使用されるリージョン:
     - Japan East: `japaneast`
     - East US: `eastus`
     - West US 2: `westus2`
     - West Europe: `westeurope`

4. **設定を保存**
   - 「設定を保存」ボタンをクリック
   - 成功メッセージが表示されることを確認

### 注意事項

⚠️ **セキュリティについて**
- サブスクリプションキーはブラウザのLocalStorageに平文で保存されます
- このアプリは教育・デモ目的で作成されています
- 本番環境では適切なセキュリティ対策を実施してください
- キーは他人と共有しないでください

## 上司の声登録

1on1測定を行う前に、上司の声を登録する必要があります。

### 手順

1. **タブを切り替え**
   - 画面上部の「上司の声登録」タブをクリック

2. **Azure設定の確認**
   - Azure設定が完了していない場合、警告が表示されます
   - 警告が表示された場合は、先に「Azure設定」を完了してください

3. **マイクの準備**
   - マイクが正しく接続されていることを確認
   - 周囲の雑音が少ない環境で実施

4. **登録開始**
   - 「声の登録を開始」ボタンをクリック
   - ブラウザがマイクへのアクセス許可を求めます
   - 「許可」をクリック

5. **音声の録音**
   - 約10秒間、自然な声で話します
   - 話す内容の例:
     - 自己紹介
     - 今日の予定
     - 最近の出来事
   - カウントダウンが表示されます

6. **登録完了**
   - 自動的に登録が完了します
   - 登録日時が表示されます
   - 「✓ 上司の声が登録されています」という表示を確認

### ヒント

💡 **より良い登録のために**
- 静かな環境で実施
- マイクとの距離は15-30cm程度
- 自然な声のトーンで話す
- 早口にならないように注意

### 登録のクリア

登録をやり直したい場合:
1. 「登録をクリア」リンクをクリック
2. 確認ダイアログで「OK」をクリック
3. 再度登録手順を実施

## 1on1測定

実際の1on1ミーティングで発話比率を測定します。

### 操作手順

#### 1. 準備

- Azure設定と上司の声登録が完了していることを確認
- 「1on1測定」タブをクリック

#### 2. 測定開始

1. **「1on1開始」ボタンをクリック**
   - マイクへのアクセス許可を求められた場合は「許可」をクリック

2. **測定開始の確認**
   - 画面に「測定中...」と表示される
   - タイマーが表示され、経過時間がカウントされる

#### 3. 1on1の実施

- 通常通り1on1ミーティングを実施
- リアルタイムで以下が表示されます:
  - 上司の発話時の青いバー
  - 部下の発話時のオレンジのバー
  - 累積発話時間

#### 4. 測定終了

1. **「1on1終了」ボタンをクリック**
   - 1on1が終わったタイミングでクリック

2. **結果の表示**
   - 自動的に結果画面に切り替わります

### 測定中の画面

```
┌─────────────────────────────────────┐
│ 測定中... ⏱️ 05:23                  │
├─────────────────────────────────────┤
│ 上司の発話                          │
│ ██████████░░░░░░░░ 50%              │
│ 125秒                               │
├─────────────────────────────────────┤
│ 部下の発話                          │
│ ██████████░░░░░░░░ 50%              │
│ 125秒                               │
└─────────────────────────────────────┘
```

### ヒント

💡 **測定のコツ**
- マイクは上司と部下の中間に配置
- 周囲の雑音を最小限に
- 2人が同時に話さないように注意
- マイクとの距離を一定に保つ

## 結果の確認

### 結果画面の内容

#### 1. 統計情報

表示される情報:
- **総会話時間**: 1on1の合計時間
- **上司の発話時間**: 上司が話した時間の合計
- **部下の発話時間**: 部下が話した時間の合計

#### 2. 発話比率（円グラフ）

- 青色: 上司の発話比率
- オレンジ色: 部下の発話比率
- パーセンテージで表示

#### 3. アドバイス

発話比率に応じたフィードバックが表示されます:

| 上司の発話比率 | アドバイス |
|---|---|
| 60%超 | ⚠️ 上司が話しすぎ - 部下の話を聞く時間を増やしましょう |
| 30-60% | ✨ 理想的なバランス - この調子で続けましょう |
| 30%未満 | ℹ️ 良い傾聴 - 必要に応じて上司からのフィードバックも |

### 結果の解釈

#### 理想的な発話比率

一般的に、効果的な1on1では:
- **上司**: 30-40%
- **部下**: 60-70%

部下が多く話すことで、以下のメリットがあります:
- 部下の考えや悩みを深く理解できる
- 部下の主体性が向上
- より良い解決策が見つかりやすい

#### 新しい測定を開始

「新しい1on1を測定」ボタンをクリックすると、新しい測定を開始できます。

## トラブルシューティング

### よくある問題と解決方法

#### 1. マイクが認識されない

**症状**: 「マイクへのアクセスが拒否されました」というエラー

**解決方法**:
1. ブラウザの設定でマイクの許可を確認
2. Chrome: 設定 > プライバシーとセキュリティ > サイトの設定 > マイク
3. マイクが正しく接続されているか確認
4. 他のアプリケーションがマイクを使用していないか確認

#### 2. Azure設定が保存できない

**症状**: 「Azure設定の初期化に失敗しました」というエラー

**解決方法**:
1. サブスクリプションキーが正しいか確認
2. リージョン名が正しいか確認（例: japaneast）
3. Azure Speech Serviceが有効か確認
4. ブラウザのコンソールでエラーメッセージを確認

#### 3. 音声認識が開始されない

**症状**: 「1on1開始」ボタンを押しても反応がない

**解決方法**:
1. Azure設定が完了しているか確認
2. 上司の声が登録されているか確認
3. インターネット接続を確認
4. ブラウザのコンソールでエラーを確認

#### 4. 話者が正しく識別されない

**症状**: 上司と部下の識別が逆になる

**原因**: 現在の実装では「最初に話した人を上司とみなす」簡易ロジックを使用

**対処方法**:
1. 1on1開始時は上司から話し始める
2. 将来的なアップデートで改善予定

#### 5. 認識精度が低い

**症状**: 発話が検出されない、または誤検出される

**解決方法**:
1. 静かな環境で実施
2. マイクとの距離を調整（15-30cm推奨）
3. はっきりと話す
4. 雑音が多い場合は外付けマイクを使用

### ブラウザコンソールの確認

エラーの詳細を確認するには:

1. **Chrome/Edge**:
   - F12キーを押す
   - 「Console」タブを選択

2. **Firefox**:
   - F12キーを押す
   - 「コンソール」タブを選択

3. **エラーメッセージを確認**:
   - 赤色で表示されるエラーメッセージを確認
   - 必要に応じてサポートに連絡

## Azure利用料金について

### 無料枠

Azure Speech Serviceには無料枠があります:
- **音声テキスト変換**: 毎月5時間まで無料
- **会話の文字起こし**: 毎月5時間まで無料

詳細: [Azure Speech Serviceの価格](https://azure.microsoft.com/ja-jp/pricing/details/cognitive-services/speech-services/)

### 料金の確認

Azureポータルで利用料金を確認できます:
1. Azureポータルにログイン
2. 「コストの管理と請求」を選択
3. 使用状況を確認

### コスト最適化

💰 **無料枠内で使用するために**:
- 測定は必要な時だけ実施
- 1on1終了後はすぐに「1on1終了」ボタンをクリック
- 不要な長時間の測定を避ける

## プライバシーとデータ

### データの取り扱い

✅ **このアプリケーションでは**:
- 音声データはAzureで処理され、ブラウザには保存されません
- 発話時間のデータのみをブラウザで処理
- 文字起こしされたテキストは表示のみで保存されません

⚠️ **Azureでのデータ処理**:
- 音声データはAzure Speech Serviceで処理されます
- Microsoftのプライバシーポリシーに従います
- 詳細: [Azure Cognitive Servicesのデータプライバシー](https://docs.microsoft.com/ja-jp/legal/cognitive-services/speech-service/data-privacy-security)

## サポート

### お問い合わせ

問題が解決しない場合:
1. GitHub Issuesで報告
2. ブラウザのコンソールログを添付
3. 再現手順を詳しく記載

## まとめ

この1on1発話比率測定アプリを使用することで:
- 📊 客観的なデータに基づいた1on1の改善
- 🎯 効果的なコミュニケーションの実現
- 📈 継続的な1on1の品質向上

より良い1on1ミーティングの実現にお役立てください！

---

**作成日**: 2025年10月29日  
**バージョン**: Azure Speech Service版 1.0
